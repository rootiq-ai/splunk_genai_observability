# =============================================================================
# Field Extractions and Data Parsing for GenAI Observability
# =============================================================================

# -----------------------------------------------------------------------------
# GenAI Traces Sourcetype
# -----------------------------------------------------------------------------
[genai:trace]
SHOULD_LINEMERGE = false
TIME_FORMAT = %Y-%m-%dT%H:%M:%S.%6N%Z
TIME_PREFIX = "timestamp"\s*:\s*"
MAX_TIMESTAMP_LOOKAHEAD = 40
KV_MODE = json
TRUNCATE = 1000000

# Field Extractions
EXTRACT-trace_id = "trace_id"\s*:\s*"(?<trace_id>[a-f0-9]+)"
EXTRACT-span_id = "span_id"\s*:\s*"(?<span_id>[a-f0-9]+)"
EXTRACT-parent_span_id = "parent_span_id"\s*:\s*"(?<parent_span_id>[a-f0-9]+)"
EXTRACT-span_type = "span_type"\s*:\s*"(?<span_type>[^"]+)"
EXTRACT-model_name = "model_name"\s*:\s*"(?<model_name>[^"]+)"
EXTRACT-model_provider = "model_provider"\s*:\s*"(?<model_provider>[^"]+)"

# Field Aliases
FIELDALIAS-latency = duration_ms AS latency_ms
FIELDALIAS-tokens_in = input_tokens AS prompt_tokens
FIELDALIAS-tokens_out = output_tokens AS completion_tokens


# Lookups
#LOOKUP-model_pricing = genai_model_pricing model_name OUTPUT input_price_per_1k output_price_per_1k model_context_window
