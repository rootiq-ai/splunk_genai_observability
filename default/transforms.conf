# =============================================================================
# Transforms for GenAI Observability Platform
# =============================================================================

# -----------------------------------------------------------------------------
# Lookup Definitions
# -----------------------------------------------------------------------------

[genai_model_pricing]
filename = genai_model_pricing.csv
case_sensitive_match = false
max_matches = 1

[genai_providers]
filename = genai_providers.csv
case_sensitive_match = false

[genai_error_categories]
filename = genai_error_categories.csv
case_sensitive_match = false

[genai_cost_centers]
filename = genai_cost_centers.csv
case_sensitive_match = false

# -----------------------------------------------------------------------------
# Field Extractions
# -----------------------------------------------------------------------------

[extract_trace_context]
REGEX = trace_id["\s:]+([a-f0-9]{32})["\s,]+span_id["\s:]+([a-f0-9]{16})
FORMAT = trace_id::$1 span_id::$2

[extract_model_info]
REGEX = model["\s:]+([^"]+)["\s,]+provider["\s:]+([^"]+)
FORMAT = model_name::$1 model_provider::$2

[extract_token_usage]
REGEX = input_tokens["\s:]+(\d+)[^}]*output_tokens["\s:]+(\d+)
FORMAT = input_tokens::$1 output_tokens::$2

[extract_error_info]
REGEX = error["\s:]+\{[^}]*type["\s:]+([^"]+)[^}]*message["\s:]+([^"]+)
FORMAT = error_type::$1 error_message::$2

